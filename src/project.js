require=function c(a,l,s){function r(t,e){if(!l[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=l[t]={exports:{}};a[t][0].call(i.exports,function(e){return r(a[t][1][e]||e)},i,i.exports,c,a,l,s)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)r(s[e]);return r}({Global:[function(e,t,n){"use strict";cc._RF.push(t,"ec8a5UikzFJ85cowa+1q7Sm","Global");var o=cc.Class({extends:cc.Component,properties:{controlStartGame:!0,enemyCount:null,lifeCount:null,levelCount:null,scoreCount:null,controlCreate:!0},start:function(){}});t.exports=new o,cc._RF.pop()},{}],Manaer:[function(e,t,n){"use strict";cc._RF.push(t,"d56b9q0uidEtqpHqZpG/BSC","Manaer");var o=e("./Global");cc.Class({extends:cc.Component,properties:{startNode:cc.Node,levelLabel:cc.Label,enemyCountLabel:cc.Label,scoreCountLabel:cc.Label,lifeCountLabel:cc.Label},start:function(){cc.director.getCollisionManager().enabled=!0,this.initDate(),this.TSButton=cc.find("Canvas/npc/Ts"),this.WKButton=cc.find("Canvas/npc/WuKong"),this.children1=this.TSButton.children,this.children2=this.WKButton.children,this.enemyNode=cc.find("Canvas/Enemys"),this.bulletNode=cc.find("Canvas/bulletNodes"),this.WKNode=cc.find("Canvas/npc/WuKong"),this.TSNode=cc.find("Canvas/npc/Ts")},update:function(e){this.nextLevel(),this.gameOver()},startGame:function(){this.startNode.active=!1},initDate:function(){o.levelCount=1,o.enemyCount=5*o.levelCount,o.scoreCount=0,o.lifeCount=3,this.levelLabel.string="第"+o.levelCount+"关",this.enemyCountLabel.string="剩余敌人："+o.enemyCount,this.scoreCountLabel.string="得分："+o.scoreCount,this.lifeCountLabel.string="剩余生命值："+o.lifeCount},nextLevel:function(){if(o.enemyCount<=0){o.levelCount++,this.levelLabel.string="第"+o.levelCount+"关",o.enemyCount=5*o.levelCount,this.enemyCountLabel.string="剩余敌人："+o.enemyCount,o.controlStartGame=!0;var e=this.bulletNode.children;for(var t in e)e[t].active=!1}},gameOver:function(){if(o.lifeCount<=0){o.levelCount=1,o.enemyCount=5*o.levelCount,o.scoreCount=0,o.lifeCount=3,this.levelLabel.string="第"+o.levelCount+"关",this.enemyCountLabel.string="剩余敌人："+o.enemyCount,this.scoreCountLabel.string="得分："+o.scoreCount,this.lifeCountLabel.string="剩余生命值："+o.lifeCount,this.startNode.active=!0,o.controlStartGame=!0,this.children1[0].active=!1,this.children1[1].active=!1,this.children2[0].active=!1,this.children2[1].active=!1;var e=this.enemyNode.children,t=this.bulletNode.children;for(var n in e)e[n].active=!1;for(var n in t)t[n].active=!1;this.WKNode.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("idle",1),this.TSNode.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("idle",1)}}}),cc._RF.pop()},{"./Global":"Global"}],bulletManager:[function(e,t,n){"use strict";cc._RF.push(t,"ab0f30rpCNP/6fDH+Y1L9Sd","bulletManager");e("npcManager");var o=e("./Global");cc.Class({extends:cc.Component,properties:{},start:function(){this.enemyCount=cc.find("Canvas/labelNode/enemyCount"),this.enemyCountLabel=this.enemyCount.getComponent(cc.Label),this.scoreCount=cc.find("Canvas/labelNode/score"),this.scoreCountLabel=this.scoreCount.getComponent(cc.Label)},onCollisionEnter:function(){this.node.active=!1,o.enemyCount--,o.scoreCount++,this.scoreCountLabel.string="得分："+o.scoreCount,this.enemyCountLabel.string="剩余敌人："+o.enemyCount}}),cc._RF.pop()},{"./Global":"Global",npcManager:"npcManager"}],enemyManager:[function(e,t,n){"use strict";cc._RF.push(t,"43961Fa+81EUrS0qMG5Y/Am","enemyManager");e("Global");var l=e("./Global");cc.Class({extends:cc.Component,properties:{enemyPrefab:cc.Prefab},start:function(){this.createNewPool(),this.countEnemy=0,this.startNode=cc.find("Canvas/StartButton"),this.lifeNode=cc.find("Canvas/labelNode/lifeCount"),this.lifeCountLabel=this.lifeNode.getComponent(cc.Label),this.enemyCount=cc.find("Canvas/labelNode/enemyCount"),this.enemyCountLabel=this.enemyCount.getComponent(cc.Label)},update:function(e){!this.startNode.active&&l.controlStartGame&&(this.countEnemy=0,this.createEnemys(),l.controlStartGame=!1)},createNewPool:function(){this.enemyPool=new cc.NodePool;for(var e=0;e<5;e++){var t=cc.instantiate(this.enemyPrefab);this.enemyPool.put(t)}},createEnemy:function(){var e=null;(e=0<this.enemyPool.size()?this.enemyPool.get():cc.instantiate(this.enemyPrefab)).parent=this.node,e.setPosition(3,-400),this.enemyMove(e)},killEnemy:function(e){e.setPosition(3,-400),this.enemyPool.put(e)},enemyMove:function(e){var t=cc.moveTo(1,3,-325),n=cc.moveTo(1,-195,-325),o=cc.moveTo(3,-195,14),i=cc.moveTo(1,3,14),c=cc.moveTo(3,3,400),a=this;e.runAction(cc.sequence(t,n,cc.callFunc(function(){e.scaleX=-1*e.scaleX}),o,i,cc.callFunc(function(){e.scaleX=-1*e.scaleX}),c,cc.callFunc(function(){a.killEnemy(e),l.lifeCount--,a.lifeCountLabel.string="剩余生命值："+l.lifeCount,l.enemyCount--,a.enemyCountLabel.string="剩余敌人："+l.enemyCount})))},createEnemys:function(){this.createEnemy(),this.countEnemy++,this.enemyScheduleID&&clearInterval(this.enemyScheduleID),this.enemyScheduleID=setInterval(this.enemySchedule.bind(this),3e3)},enemySchedule:function(){console.log(this.countEnemy,l.enemyCount),!this.startNode.active&&this.countEnemy<5*l.levelCount&&(this.createEnemy(),this.countEnemy++)}}),cc._RF.pop()},{"./Global":"Global",Global:"Global"}],enemy:[function(e,t,n){"use strict";cc._RF.push(t,"55a8fiIkjJABZmwnNp48qrp","enemy"),cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(){this.node.active=!1}}),cc._RF.pop()},{}],npcManager:[function(e,t,n){"use strict";cc._RF.push(t,"9ff1e1ovTFMdoTXV4zcB8xW","npcManager");var o=e("./Global");cc.Class({extends:cc.Component,properties:{TSButton:cc.Button,WKButton:cc.Button,bg:cc.Node,BulletNode:cc.Node,BulletPrefab:cc.Prefab},start:function(){this.WKNode=cc.find("Canvas/npc/WuKong"),this.TSNode=cc.find("Canvas/npc/Ts"),this.satrtNode=cc.find("Canvas/StartButton"),this.createBulletPool(),this.TSButton.node.on("click",this.clickTS,this),this.WKButton.node.on("click",this.clickWK,this),this.bg.on(cc.Node.EventType.MOUSE_MOVE,function(e){if((this.TSButton.node.children[0].active||this.WKButton.node.children[0].active)&&!this.satrtNode.active){if(this.TSButton.node.children[0].active)var t=this.TSButton.node.convertToNodeSpaceAR(e.getLocation());if(this.WKButton.node.children[0].active)t=this.WKButton.node.convertToNodeSpaceAR(e.getLocation());var n=t.x,o=t.y,i=80*(o-45)/(80*Math.sqrt(n*n+(o-45)*(o-45))),c=Math.floor(180/(Math.PI/Math.acos(i)));0==n&&o<45&&(c=180),0<n&&45==o&&(c=90),n<0&&45==o&&(c=270),0<n&&o<45&&(c=360+c),n<0&&o<45&&(c=360-c),n<0&&45<o&&(c=360-c),this.TSButton.node.children[0].active&&(this.TSButton.node.children[0].rotation=c),this.WKButton.node.children[0].active&&(this.WKButton.node.children[0].rotation=c)}},this),this.bg.on(cc.Node.EventType.MOUSE_DOWN,function(e){if((this.TSButton.node.children[0].active||this.WKButton.node.children[0].active)&&!this.satrtNode.active&&o.controlCreate){if(this.TSButton.node.children[0].active){this.TSNode.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("attack",1);var t=this.TSButton.node.convertToNodeSpaceAR(e.getLocation());(n=this.createBullet()).setPosition(-160,221)}if(this.WKButton.node.children[0].active){this.WKNode.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("attack",1);var n;t=this.WKButton.node.convertToNodeSpaceAR(e.getLocation());(n=this.createBullet()).setPosition(-95,-180)}n.runAction(cc.repeatForever(cc.moveBy(1,t.x,t.y))),o.controlCreate=!1,setTimeout(function(){o.controlCreate=!0},1e3)}},this),this.bg.on(cc.Node.EventType.MOUSE_UP,function(){!this.TSButton.node.children[0].active&&!this.WKButton.node.children[0].active||this.satrtNode.active||(this.TSButton.node.children[0].active&&this.TSNode.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("aim",0),this.WKButton.node.children[0].active&&this.WKNode.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("aim",0))},this)},update:function(e){this.reaycleBullet()},clickTS:function(){if(!this.satrtNode.active){var e=this.TSButton.node.children,t=this.WKButton.node.children;e[0].active?(this.TSButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("idle",1),e[0].active=!1,e[1].active=!1):(this.TSButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("select",1),this.TSButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("aim",0),this.WKButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("idle",1),e[0].active=!0,e[1].active=!0,t[0].active=!1,t[1].active=!1)}},clickWK:function(){if(!this.satrtNode.active){var e=this.TSButton.node.children,t=this.WKButton.node.children;t[0].active?(this.WKButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("idle",1),t[0].active=!1,t[1].active=!1):(this.WKButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("select",1),this.WKButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("aim",0),this.TSButton.node.children[2].getComponent("dragonBones.ArmatureDisplay").playAnimation("idle",1),e[0].active=!1,e[1].active=!1,t[0].active=!0,t[1].active=!0)}},createBulletPool:function(){this.bulletPool=new cc.NodePool;for(var e=0;e<5;e++){var t=cc.instantiate(this.BulletPrefab);this.bulletPool.put(t)}},createBullet:function(){var e=null;return(e=0<this.bulletPool.size()?this.bulletPool.get():cc.instantiate(this.BulletPrefab)).parent=this.BulletNode,e},killBullet:function(e){console.log("1111"),this.bulletPool.put(e)},reaycleBullet:function(){var e=this.BulletNode.children;if(!(e.length<=0))for(var t in e)(320<e[t].x||e[t].x<-320||568<e[t].y||e[t].y<-568)&&(e[t].stopAllActions(),this.killBullet(e[t]))}}),cc._RF.pop()},{"./Global":"Global"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,n){"use strict";cc._RF.push(t,"61a4f5pCk9MfYzeM4mjXcXE","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["Global","Manaer","bulletManager","enemy","enemyManager","npcManager","use_v2.1-2.2.1_cc.Toggle_event"]);